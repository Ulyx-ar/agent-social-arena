'use strict';

var getProgramAccountsV2 = require('./getProgramAccountsV2.cjs');

const makeGetAllProgramAccounts = (call) => async (programId, options = {}) => {
    const getPage = getProgramAccountsV2.makeGetProgramAccountsV2(call);
    const results = [];
    let paginationKey = null;
    do {
        const res = await getPage([
            programId,
            {
                ...options,
                limit: 10000,
                ...(paginationKey ? { paginationKey } : {}),
            },
        ]);
        // Unwrap RpcResponse<T> if withContext = true
        const page = res?.value ?? res;
        results.push(...page.accounts);
        paginationKey = page.paginationKey;
    } while (paginationKey);
    return results;
};

exports.makeGetAllProgramAccounts = makeGetAllProgramAccounts;
//# sourceMappingURL=getAllProgramAccounts.cjs.map
