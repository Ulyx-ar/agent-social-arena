'use strict';

var getTokenAccountsByOwnerV2 = require('./getTokenAccountsByOwnerV2.cjs');

const makeGetAllTokenAccountsByOwner = (call) => async (owner, filter = {}, options = {}) => {
    const getPage = getTokenAccountsByOwnerV2.makeGetTokenAccountsByOwnerV2(call);
    const out = [];
    let paginationKey = null;
    do {
        const res = await getPage([
            owner,
            filter,
            {
                ...options,
                limit: 10000,
                ...(paginationKey ? { paginationKey } : {}),
            },
        ]);
        const page = res?.value ?? res;
        out.push(...page.accounts);
        paginationKey = page.paginationKey;
    } while (paginationKey);
    return out;
};

exports.makeGetAllTokenAccountsByOwner = makeGetAllTokenAccountsByOwner;
//# sourceMappingURL=getAllTokenAccountsByOwner.cjs.map
