'use strict';

var kit = require('@solana/kit');
var stake = require('@solana-program/stake');
var types = require('./types.cjs');

const makeCreateUnstakeTransaction = ({ rpc, }) => {
    return async (ownerSigner, stakeAccount) => {
        const deactivateIx = stake.getDeactivateInstruction({
            stake: stakeAccount,
            clockSysvar: types.SYSVAR_CLOCK,
            stakeAuthority: ownerSigner,
        });
        const { value: blockHeight } = await rpc.getLatestBlockhash().send();
        const msg = kit.pipe(kit.createTransactionMessage({ version: 0 }), (m) => kit.setTransactionMessageFeePayer(ownerSigner.address, m), (m) => kit.setTransactionMessageLifetimeUsingBlockhash(blockHeight, m), (m) => kit.appendTransactionMessageInstructions([deactivateIx], m));
        const signedTx = await kit.signTransactionMessageWithSigners(msg);
        const serializedTx = kit.getBase64EncodedWireTransaction(signedTx);
        return { serializedTx };
    };
};

exports.makeCreateUnstakeTransaction = makeCreateUnstakeTransaction;
//# sourceMappingURL=createUnstakeTransaction.cjs.map
