{"version":3,"file":"getHeliusStakeAccounts.cjs","sources":["../../../../src/staking/getHeliusStakeAccounts.ts"],"sourcesContent":["import { Address, Base58EncodedBytes, Rpc, SolanaRpcApi } from \"@solana/kit\";\nimport { HELIUS_VALIDATOR_ID, STAKE_PROGRAM_ID } from \"./types\";\n\nexport const makeGetHeliusStakeAccounts = ({\n  rpc,\n}: {\n  rpc: Rpc<SolanaRpcApi>;\n}) => {\n  return async (wallet: Address | string): Promise<any[]> => {\n    const walletStr = wallet.toString();\n\n    const accounts = await rpc\n      .getProgramAccounts(STAKE_PROGRAM_ID, {\n        encoding: \"jsonParsed\",\n        filters: [\n          {\n            memcmp: {\n              offset: 44n,\n              bytes: walletStr as Base58EncodedBytes,\n              encoding: \"base58\",\n            },\n          },\n        ],\n      })\n      .send();\n\n    return accounts.filter(\n      (acc: any) =>\n        acc.account?.data?.parsed?.info?.stake?.delegation?.voter ===\n        HELIUS_VALIDATOR_ID\n    );\n  };\n};\n"],"names":["STAKE_PROGRAM_ID","HELIUS_VALIDATOR_ID"],"mappings":";;;;MAGa,0BAA0B,GAAG,CAAC,EACzC,GAAG,GAGJ,KAAI;AACH,IAAA,OAAO,OAAO,MAAwB,KAAoB;AACxD,QAAA,MAAM,SAAS,GAAG,MAAM,CAAC,QAAQ,EAAE;QAEnC,MAAM,QAAQ,GAAG,MAAM;aACpB,kBAAkB,CAACA,sBAAgB,EAAE;AACpC,YAAA,QAAQ,EAAE,YAAY;AACtB,YAAA,OAAO,EAAE;AACP,gBAAA;AACE,oBAAA,MAAM,EAAE;AACN,wBAAA,MAAM,EAAE,GAAG;AACX,wBAAA,KAAK,EAAE,SAA+B;AACtC,wBAAA,QAAQ,EAAE,QAAQ;AACnB,qBAAA;AACF,iBAAA;AACF,aAAA;SACF;AACA,aAAA,IAAI,EAAE;QAET,OAAO,QAAQ,CAAC,MAAM,CACpB,CAAC,GAAQ,KACP,GAAG,CAAC,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK;AACzD,YAAAC,yBAAmB,CACtB;AACH,IAAA,CAAC;AACH;;;;"}