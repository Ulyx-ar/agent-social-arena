import { makeGetTokenAccountsByOwnerV2 } from './getTokenAccountsByOwnerV2.js';

const makeGetAllTokenAccountsByOwner = (call) => async (owner, filter = {}, options = {}) => {
    const getPage = makeGetTokenAccountsByOwnerV2(call);
    const out = [];
    let paginationKey = null;
    do {
        const res = await getPage([
            owner,
            filter,
            {
                ...options,
                limit: 10000,
                ...(paginationKey ? { paginationKey } : {}),
            },
        ]);
        const page = res?.value ?? res;
        out.push(...page.accounts);
        paginationKey = page.paginationKey;
    } while (paginationKey);
    return out;
};

export { makeGetAllTokenAccountsByOwner };
//# sourceMappingURL=getAllTokenAccountsByOwner.js.map
