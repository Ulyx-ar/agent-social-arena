import { STAKE_PROGRAM_ID, HELIUS_VALIDATOR_ID } from './types.js';

const makeGetHeliusStakeAccounts = ({ rpc, }) => {
    return async (wallet) => {
        const walletStr = wallet.toString();
        const accounts = await rpc
            .getProgramAccounts(STAKE_PROGRAM_ID, {
            encoding: "jsonParsed",
            filters: [
                {
                    memcmp: {
                        offset: 44n,
                        bytes: walletStr,
                        encoding: "base58",
                    },
                },
            ],
        })
            .send();
        return accounts.filter((acc) => acc.account?.data?.parsed?.info?.stake?.delegation?.voter ===
            HELIUS_VALIDATOR_ID);
    };
};

export { makeGetHeliusStakeAccounts };
//# sourceMappingURL=getHeliusStakeAccounts.js.map
