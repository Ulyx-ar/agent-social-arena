import { sendAndConfirmTransactionFactory, getSignatureFromTransaction } from '@solana/kit';

const makeSendSmartTransaction = ({ raw, rpcSubscriptions, createSmartTransaction, }) => {
    const send = async ({ 
    // Defaults
    confirmCommitment = "confirmed", maxRetries = 0n, skipPreflight = true, ...rest }) => {
        // Build & sign
        const { signed } = (await createSmartTransaction(rest));
        // Send + confirm
        const sendAndConfirm = sendAndConfirmTransactionFactory({
            rpc: raw,
            // Undefined is fine at runtime; cast to silence TS
            rpcSubscriptions: rpcSubscriptions,
        });
        await sendAndConfirm(signed, {
            commitment: confirmCommitment,
            maxRetries,
            skipPreflight,
        });
        // Return the sig
        return getSignatureFromTransaction(signed);
    };
    return { send };
};

export { makeSendSmartTransaction };
//# sourceMappingURL=sendSmartTransaction.js.map
