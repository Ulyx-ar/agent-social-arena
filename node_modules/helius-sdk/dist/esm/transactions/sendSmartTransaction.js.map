{"version":3,"file":"sendSmartTransaction.js","sources":["../../../../src/transactions/sendSmartTransaction.ts"],"sourcesContent":["// src/transactions/sendSmartTransaction.ts\nimport type {\n  SendSmartTxDeps,\n  SendSmartTransactionFn,\n  SendSmartTransactionInput,\n} from \"./types\";\nimport {\n  sendAndConfirmTransactionFactory,\n  getSignatureFromTransaction,\n} from \"@solana/kit\";\n\nexport const makeSendSmartTransaction = ({\n  raw,\n  rpcSubscriptions,\n  createSmartTransaction,\n}: SendSmartTxDeps) => {\n  const send: SendSmartTransactionFn = async ({\n    // Defaults\n    confirmCommitment = \"confirmed\",\n    maxRetries = 0n,\n    skipPreflight = true,\n    ...rest\n  }: SendSmartTransactionInput) => {\n    // Build & sign\n    const { signed } = (await createSmartTransaction(rest)) as any;\n\n    // Send + confirm\n    const sendAndConfirm = sendAndConfirmTransactionFactory({\n      rpc: raw,\n      // Undefined is fine at runtime; cast to silence TS\n      rpcSubscriptions: rpcSubscriptions as any,\n    });\n\n    await sendAndConfirm(signed, {\n      commitment: confirmCommitment,\n      maxRetries,\n      skipPreflight,\n    });\n\n    // Return the sig\n    return getSignatureFromTransaction(signed);\n  };\n\n  return { send };\n};\n"],"names":[],"mappings":";;AAWO,MAAM,wBAAwB,GAAG,CAAC,EACvC,GAAG,EACH,gBAAgB,EAChB,sBAAsB,GACN,KAAI;IACpB,MAAM,IAAI,GAA2B,OAAO;;AAE1C,IAAA,iBAAiB,GAAG,WAAW,EAC/B,UAAU,GAAG,EAAE,EACf,aAAa,GAAG,IAAI,EACpB,GAAG,IAAI,EACmB,KAAI;;QAE9B,MAAM,EAAE,MAAM,EAAE,IAAI,MAAM,sBAAsB,CAAC,IAAI,CAAC,CAAQ;;QAG9D,MAAM,cAAc,GAAG,gCAAgC,CAAC;AACtD,YAAA,GAAG,EAAE,GAAG;;AAER,YAAA,gBAAgB,EAAE,gBAAuB;AAC1C,SAAA,CAAC;QAEF,MAAM,cAAc,CAAC,MAAM,EAAE;AAC3B,YAAA,UAAU,EAAE,iBAAiB;YAC7B,UAAU;YACV,aAAa;AACd,SAAA,CAAC;;AAGF,QAAA,OAAO,2BAA2B,CAAC,MAAM,CAAC;AAC5C,IAAA,CAAC;IAED,OAAO,EAAE,IAAI,EAAE;AACjB;;;;"}