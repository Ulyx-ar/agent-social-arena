import { getBase64EncodedWireTransaction } from '@solana/kit';

const makeSendTransaction = (rpc) => {
    const normalise = (tx) => {
        if (typeof tx === "string") {
            return tx;
        }
        if ("base64" in tx && typeof tx.base64 === "string") {
            return tx.base64;
        }
        if ("signed" in tx) {
            return getBase64EncodedWireTransaction(tx.signed);
        }
        if (typeof tx.serialize === "function") {
            return getBase64EncodedWireTransaction(tx);
        }
        throw new Error("Unsupported transaction shape passed to sendTransaction");
    };
    const send = async (tx, opts = { skipPreflight: true }) => rpc
        .sendTransaction(normalise(tx), { encoding: "base64", ...opts })
        .send();
    return { send };
};

export { makeSendTransaction };
//# sourceMappingURL=sendTransaction.js.map
