{"version":3,"file":"sendTransaction.js","sources":["../../../../src/transactions/sendTransaction.ts"],"sourcesContent":["import {\n  Base64EncodedWireTransaction,\n  Rpc,\n  SolanaRpcApi,\n  getBase64EncodedWireTransaction,\n} from \"@solana/kit\";\nimport { SendableTransaction, SendTransactionFn } from \"./types\";\n\nexport const makeSendTransaction = (rpc: Rpc<SolanaRpcApi>) => {\n  const normalise = (tx: SendableTransaction): Base64EncodedWireTransaction => {\n    if (typeof tx === \"string\") {\n      return tx as Base64EncodedWireTransaction;\n    }\n\n    if (\"base64\" in tx && typeof tx.base64 === \"string\") {\n      return tx.base64 as Base64EncodedWireTransaction;\n    }\n\n    if (\"signed\" in tx) {\n      return getBase64EncodedWireTransaction(tx.signed as any);\n    }\n\n    if (typeof (tx as any).serialize === \"function\") {\n      return getBase64EncodedWireTransaction(tx as any);\n    }\n\n    throw new Error(\"Unsupported transaction shape passed to sendTransaction\");\n  };\n\n  const send: SendTransactionFn = async (tx, opts = { skipPreflight: true }) =>\n    rpc\n      .sendTransaction(normalise(tx), { encoding: \"base64\", ...opts } as any)\n      .send();\n\n  return { send };\n};\n"],"names":[],"mappings":";;AAQO,MAAM,mBAAmB,GAAG,CAAC,GAAsB,KAAI;AAC5D,IAAA,MAAM,SAAS,GAAG,CAAC,EAAuB,KAAkC;AAC1E,QAAA,IAAI,OAAO,EAAE,KAAK,QAAQ,EAAE;AAC1B,YAAA,OAAO,EAAkC;QAC3C;QAEA,IAAI,QAAQ,IAAI,EAAE,IAAI,OAAO,EAAE,CAAC,MAAM,KAAK,QAAQ,EAAE;YACnD,OAAO,EAAE,CAAC,MAAsC;QAClD;AAEA,QAAA,IAAI,QAAQ,IAAI,EAAE,EAAE;AAClB,YAAA,OAAO,+BAA+B,CAAC,EAAE,CAAC,MAAa,CAAC;QAC1D;AAEA,QAAA,IAAI,OAAQ,EAAU,CAAC,SAAS,KAAK,UAAU,EAAE;AAC/C,YAAA,OAAO,+BAA+B,CAAC,EAAS,CAAC;QACnD;AAEA,QAAA,MAAM,IAAI,KAAK,CAAC,yDAAyD,CAAC;AAC5E,IAAA,CAAC;AAED,IAAA,MAAM,IAAI,GAAsB,OAAO,EAAE,EAAE,IAAI,GAAG,EAAE,aAAa,EAAE,IAAI,EAAE,KACvE;AACG,SAAA,eAAe,CAAC,SAAS,CAAC,EAAE,CAAC,EAAE,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,IAAI,EAAS;AACrE,SAAA,IAAI,EAAE;IAEX,OAAO,EAAE,IAAI,EAAE;AACjB;;;;"}